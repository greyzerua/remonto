# üîí –ü—Ä–æ–±–ª–µ–º–∏ –±–µ–∑–ø–µ–∫–∏ —Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ –±–µ–∑–ø–µ–∫–∏

### 1. **–ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—è –≤ AsyncStorage (–ö–†–ò–¢–ò–ß–ù–û)**

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü–∞—Ä–æ–ª—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –Ω–µ–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ–º—É –≤–∏–≥–ª—è–¥—ñ –≤ `AsyncStorage`
- –Ø–∫—â–æ –ø—Ä–∏—Å—Ç—Ä—ñ–π –±—É–¥–µ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–æ–≤–∞–Ω–∏–π, –ø–∞—Ä–æ–ª—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –ø—Ä–æ—á–∏—Ç–∞–Ω—ñ
- –¶–µ –ø–æ—Ä—É—à—É—î –±–∞–∑–æ–≤—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏ –±–µ–∑–ø–µ–∫–∏

**–ü–æ—Ç–æ—á–Ω–∏–π –∫–æ–¥:**
```typescript
// screens/AuthScreen.tsx
await AsyncStorage.setItem(AUTH_EMAIL_KEY, email.trim());
await AsyncStorage.setItem(AUTH_PASSWORD_KEY, password); // ‚ùå –ù–ï–ë–ï–ó–ü–ï–ß–ù–û!
```

**–†—ñ—à–µ–Ω–Ω—è:**
1. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Firebase Auth —Ç–æ–∫–µ–Ω–∏** (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
   - Firebase Auth –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—î —Ç–æ–∫–µ–Ω–∏ –±–µ–∑–ø–µ—á–Ω–æ
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `onAuthStateChanged` –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É
   - –ù–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –ø–∞—Ä–æ–ª—ñ –≤–∑–∞–≥–∞–ª—ñ

2. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤**
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `react-native-keychain` –∞–±–æ `expo-secure-store`
   - –®–∏—Ñ—Ä—É–≤–∞—Ç–∏ –ø–∞—Ä–æ–ª—ñ –ø–µ—Ä–µ–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±—ñ–æ–º–µ—Ç—Ä–∏—á–Ω—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é

3. **–ù–∞–π–∫—Ä–∞—â–µ —Ä—ñ—à–µ–Ω–Ω—è: –¢—ñ–ª—å–∫–∏ email**
   - –ó–±–µ—Ä—ñ–≥–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ email
   - –í–∏–º–∞–≥–∞—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–∏–π –≤—Ö—ñ–¥ –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É
   - –ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±—ñ–æ–º–µ—Ç—Ä–∏—á–Ω—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é

---

### 2. **Firestore Security Rules (–ö–†–ò–¢–ò–ß–ù–û –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É)**

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —Ç–µ—Å—Ç–æ–≤—ñ –ø—Ä–∞–≤–∏–ª–∞, —è–∫—ñ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –≤—Å—ñ–º –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º —á–∏—Ç–∞—Ç–∏ —Ç–∞ –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ –≤—Å—ñ –¥–∞–Ω—ñ
- –¶–µ –Ω–µ–±–µ–∑–ø–µ—á–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

**–ü–æ—Ç–æ—á–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞:**
```javascript
// firestore.rules
match /{document=**} {
  allow read, write: if request.auth != null; // ‚ùå –ù–ï–ë–ï–ó–ü–ï–ß–ù–û!
}
```

**–†—ñ—à–µ–Ω–Ω—è:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±–µ–∑–ø–µ—á–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞ –∑ `FIREBASE_SETUP.md` (–í–∞—Ä—ñ–∞–Ω—Ç 2)
- –î–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –Ω–∞ —á–ª–µ–Ω—Å—Ç–≤–æ –≤ –≥—Ä—É–ø–∞—Ö
- –û–±–º–µ–∂–∏—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –¥–∞–Ω–∏—Ö —Ç—ñ–ª—å–∫–∏ –¥–ª—è —É—á–∞—Å–Ω–∏–∫—ñ–≤ –≥—Ä—É–ø

---

### 3. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö**

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –î–∞–Ω—ñ –≤ AsyncStorage –Ω–µ —à–∏—Ñ—Ä—É—é—Ç—å—Å—è
- –ß—É—Ç–ª–∏–≤—ñ –¥–∞–Ω—ñ (email) –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –Ω–µ–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ–º—É –≤–∏–≥–ª—è–¥—ñ

**–†—ñ—à–µ–Ω–Ω—è:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `expo-secure-store` –¥–ª—è —á—É—Ç–ª–∏–≤–∏—Ö –¥–∞–Ω–∏—Ö
- –ê–±–æ `react-native-keychain` –¥–ª—è iOS/Android

---

### 4. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∑–∞—Ö–∏—Å—Ç—É –≤—ñ–¥ –∞—Ç–∞–∫**

**–ü—Ä–æ–±–ª–µ–º–∏:**
- –ù–µ–º–∞—î rate limiting –¥–ª—è –≤—Ö–æ–¥—É/—Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
- –ù–µ–º–∞—î CAPTCHA –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –≤—ñ–¥ –±–æ—Ç—ñ–≤
- –ù–µ–º–∞—î –æ–±–º–µ–∂–µ–Ω–Ω—è –Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–± –≤—Ö–æ–¥—É

**–†—ñ—à–µ–Ω–Ω—è:**
- –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ Firebase App Check
- –î–æ–¥–∞—Ç–∏ rate limiting –Ω–∞ Firebase Functions
- –î–æ–¥–∞—Ç–∏ CAPTCHA –¥–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó

---

### 5. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –±—ñ–æ–º–µ—Ç—Ä–∏—á–Ω–æ—ó –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó**

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –ø–æ–≤–∏–Ω–Ω—ñ –≤–≤–æ–¥–∏—Ç–∏ –ø–∞—Ä–æ–ª—å —â–æ—Ä–∞–∑—É
- –ù–µ–º–∞—î –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ Face ID / Touch ID / Fingerprint

**–†—ñ—à–µ–Ω–Ω—è:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `expo-local-authentication`
- –î–æ–¥–∞—Ç–∏ –±—ñ–æ–º–µ—Ç—Ä–∏—á–Ω—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é —è–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É –ø–∞—Ä–æ–ª—é

---

## üìã –ü–ª–∞–Ω –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è (–ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏)

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 1 (–ö–†–ò–¢–ò–ß–ù–û):
1. ‚úÖ **–ü—Ä–∏–±—Ä–∞—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤** - –í–ò–ü–†–ê–í–õ–ï–ù–û
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ Firebase Auth —Ç–æ–∫–µ–Ω–∏
   - –ü–∞—Ä–æ–ª—ñ –±—ñ–ª—å—à–µ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è

2. ‚úÖ **–û–Ω–æ–≤–∏—Ç–∏ Firestore Security Rules** - –í–ò–ü–†–ê–í–õ–ï–ù–û
   - –ó–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–æ –±–µ–∑–ø–µ—á–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞
   - –î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –Ω–∞ —á–ª–µ–Ω—Å—Ç–≤–æ –≤ –≥—Ä—É–ø–∞—Ö

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 2 (–í–ê–ñ–õ–ò–í–û):
3. ‚úÖ **–î–æ–¥–∞—Ç–∏ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –¥–ª—è —á—É—Ç–ª–∏–≤–∏—Ö –¥–∞–Ω–∏—Ö** - –í–ò–ü–†–ê–í–õ–ï–ù–û
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `expo-secure-store` –¥–ª—è email

4. ‚úÖ **–î–æ–¥–∞—Ç–∏ –±—ñ–æ–º–µ—Ç—Ä–∏—á–Ω—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é** - –í–ò–ü–†–ê–í–õ–ï–ù–û
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `expo-local-authentication`
   - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ Face ID / Touch ID / Fingerprint

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 3 (–†–ï–ö–û–ú–ï–ù–î–û–í–ê–ù–û):
5. üìù **–î–æ–¥–∞—Ç–∏ –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ –∞—Ç–∞–∫**
   - Firebase App Check
   - Rate limiting
   - CAPTCHA

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –∑–º—ñ–Ω–∏

### 1. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Firebase Auth —Ç–æ–∫–µ–Ω—ñ–≤ –∑–∞–º—ñ—Å—Ç—å –ø–∞—Ä–æ–ª—ñ–≤

**–ó–∞–º—ñ—Å—Ç—å:**
```typescript
await AsyncStorage.setItem(AUTH_PASSWORD_KEY, password);
```

**–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:**
```typescript
// Firebase Auth –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—î —Ç–æ–∫–µ–Ω–∏
// –ü—Ä–æ—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ onAuthStateChanged
```

### 2. –ë–µ–∑–ø–µ—á–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è email

**–ó–∞–º—ñ—Å—Ç—å:**
```typescript
await AsyncStorage.setItem(AUTH_EMAIL_KEY, email);
```

**–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:**
```typescript
import * as SecureStore from 'expo-secure-store';
await SecureStore.setItemAsync(AUTH_EMAIL_KEY, email);
```

### 3. –ë—ñ–æ–º–µ—Ç—Ä–∏—á–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

```typescript
import * as LocalAuthentication from 'expo-local-authentication';

// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ
const hasHardware = await LocalAuthentication.hasHardwareAsync();
const isEnrolled = await LocalAuthentication.isEnrolledAsync();

if (hasHardware && isEnrolled) {
  const result = await LocalAuthentication.authenticateAsync({
    promptMessage: '–ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å –≤—Ö—ñ–¥',
    cancelLabel: '–°–∫–∞—Å—É–≤–∞—Ç–∏',
  });
  
  if (result.success) {
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤—Ö—ñ–¥
  }
}
```

---

## üìö –ö–æ—Ä–∏—Å–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏

- [Firebase Security Rules](https://firebase.google.com/docs/firestore/security/get-started)
- [Expo Secure Store](https://docs.expo.dev/versions/latest/sdk/securestore/)
- [Expo Local Authentication](https://docs.expo.dev/versions/latest/sdk/local-authentication/)
- [OWASP Mobile Security](https://owasp.org/www-project-mobile-security/)

---

## ‚úÖ –°—Ç–∞—Ç—É—Å –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å

**–í—Å—ñ –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ –±–µ–∑–ø–µ–∫–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ!**

- ‚úÖ –ü–∞—Ä–æ–ª—ñ –±—ñ–ª—å—à–µ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ Firebase Auth —Ç–æ–∫–µ–Ω–∏
- ‚úÖ Email –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ SecureStore (—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ)
- ‚úÖ –î–æ–¥–∞–Ω–æ –±—ñ–æ–º–µ—Ç—Ä–∏—á–Ω—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–æ Firestore Security Rules

**–î–æ–¥–∞—Ç–æ–∫ –≥–æ—Ç–æ–≤–∏–π –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ!**

## ‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

1. **Firebase App Check** - –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –≤—ñ–¥ –±–æ—Ç—ñ–≤
2. **Rate Limiting** - –æ–±–º–µ–∂–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Å–ø—Ä–æ–± –≤—Ö–æ–¥—É
3. **CAPTCHA** - –¥–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
4. **2FA** - –¥–≤–æ—Ñ–∞–∫—Ç–æ—Ä–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

